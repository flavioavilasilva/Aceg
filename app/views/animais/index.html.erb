<!DOCTYPE html>

<%= javascript_tag "var autocomplete_items = #{ @animais.to_json };" %>

<h1>Animais</h1>

<form class="form-wrapper cf" method="get" action="<%= animais_path %>" >
    <input type="text" id='query' placeholder="Coloque qualquer termo relevante..." required name="query">
    <button type="submit">Buscar</button>
</form> 

<%= link_to 'Doar Pet', new_animal_path %>
<table>
  <tr>
    <th>Nome</th>
    <th>Tipo</th>
		<th>Raça</th>
    <th>Porte</th>
    <th>Peso</th>
    <th>Estado</th>
    <th>Cidade</th>
    <th>Rua</th>
    <th>Numero rua</th>
    <th>Prioridade adocao</th>
    <th>Descrição</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
	
<% if !@animais.blank? %>

<% @animais.each do |animal| %>
	
  <tr>
    <td><%= animal.nome %></td>
    <td><%= animal.tipo_animal.tipo_animal %></td>
		<td><%= animal.tipo_animal.raca.raca %></td>
    <td><%= animal.tipo_animal.raca.raca %></td>
    <td><%= animal.estado.estado %></td>
    <td><%= animal.cidade.cidade %></td>
    <td><%= animal.rua %></td>
    <td><%= animal.numero_rua %></td>
    <td><%= animal.prioridade_adocao.prioridade_adocao %></td>
    <td><%= animal.descricao_animal %></td>
		
    <td><%= link_to 'Show', animal %></td>
    <% if can? :update, animal %>
    <td><%= link_to 'Edit', edit_animal_path(animal) %></td>
    <% end %>
    <% if can? :destroy, animal %>
    <td><%= link_to 'Destroy', animal, method: :delete, data: { confirm: 'A disponibilidade do animal para adoção será cancelada, deseja prosseguir ?' } %></td>
    <% end %>
  </tr>
	<% end %>
	<%else%>
	Dados indisponiveis!
	<% end%>

</table>
<% content_for :css do %>
  <link rel="stylesheet" href="/stylesheets/aplication.css">
<% end %>

<script type="text/javascript">

	//$('#query').typeahead({source: autocomplete_items});
	
	$('#query').typeahead({
		
	name: 'animal',
	remote: '/animais.json?query=%QUERY',
  template: ['<p class="repo-name">{{nome}}</p>']
	.join(''), 
 	engine: Hogan

	});

</script>

<style>

.cf:before, .cf:after{
    content:"";
    display:table;
}
 
.cf:after{
    clear:both;
}
 
.cf{
    zoom:1;
} 

/* Form wrapper styling */
.form-wrapper {
    width: 450px;
    padding: 15px;
    margin: 150px auto 50px auto;
    background: #444;
    background: rgba(0,0,0,.2);
    border-radius: 10px;
    box-shadow: 0 1px 1px rgba(0,0,0,.4) inset, 0 1px 0 rgba(255,255,255,.2);
		height:50px;
}
 
/* Form text input */
 
.form-wrapper input {
    width: 330px;
    height: 20px;
    padding: 10px 5px;
    float: left;   
    font: bold 15px 'lucida sans', 'trebuchet MS', 'Tahoma';
    border: 0;
    background: #eee;
    border-radius: 3px 0 0 3px;     
}
 
.form-wrapper input:focus {
    outline: 0;
    background: #fff;
    box-shadow: 0 0 2px rgba(0,0,0,.8) inset;
}
 
.form-wrapper input::-webkit-input-placeholder {
   color: #999;
   font-weight: normal;
   font-style: italic;
}
 
.form-wrapper input:-moz-placeholder {
    color: #999;
    font-weight: normal;
    font-style: italic;
}
 
.form-wrapper input:-ms-input-placeholder {
    color: #999;
    font-weight: normal;
    font-style: italic;
}   
 
/* Form submit button */
.form-wrapper button {
    overflow: visible;
    position: relative;
    float: right;
    border: 0;
    padding: 0;
    cursor: pointer;
    height: 40px;
    width: 110px;
    font: bold 15px/40px 'lucida sans', 'trebuchet MS', 'Tahoma';
    color: #fff;
    text-transform: uppercase;
    background: #DEF296;
    border-radius: 0 3px 3px 0;     
    text-shadow: 0 -1px 0 rgba(0, 0 ,0, .3);
}  
   
.form-wrapper button:hover{    
    background: #B2C278;
}  
   
.form-wrapper button:active,
.form-wrapper button:focus{  
    background: #c42f2f;
    outline: 0;  
}
 
.form-wrapper button:before { /* left arrow */
    content: '';
    position: absolute;
    border-width: 8px 8px 8px 0;
    border-style: solid solid solid none;
    border-color: transparent #DEF296 transparent;
    top: 12px;
    left: -6px;
}
 
.form-wrapper button:hover:before{
    border-right-color: #e54040;
}
 
.form-wrapper button:focus:before,
.form-wrapper button:active:before{
        border-right-color: #c42f2f;
}     
 
.form-wrapper button::-moz-focus-inner { /* remove extra button spacing for Mozilla Firefox */
    border: 0;
    padding: 0;
}    

</style>
